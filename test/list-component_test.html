<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>list-component test</title>

    <script src="../../webcomponentsjs/webcomponents-loader.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <link rel="import" href="../list-component.html">
  </head>
  <body>

    <test-fixture id="initialUserFixture">
      <template>
        <list-component></list-component>
      </template>
    </test-fixture>

    <test-fixture id="newUserFixture">
      <template>
        <list-component></list-component>
      </template>
    </test-fixture>

    <script>

      // Two basic test

      suite('list-component', () => {

        test('There is an initial user John Doe.', () => {
          const element = fixture('initialUserFixture');
          const elementShadowRoot = element.shadowRoot;
          const length = elementShadowRoot.querySelector('tbody').childElementCount;
          // Header + John Doe + new user row (input)
          assert.equal(length, 3);
        });

        test('Adding a new user increases the users array.', () => {
          const element = fixture('newUserFixture');
          const elementShadowRoot = element.shadowRoot;
          element.newName = 'Bruce';
          element.newSurname = 'Wayne';
          element.newAge = '45';
          const initialUsers = element.users.length;
          element.addUser();
          const finalUsers = element.users.length;
          assert.equal(initialUsers + 1, finalUsers);
        });

      });
    </script>

  </body>
</html>
